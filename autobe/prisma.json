{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"discussion_board_channels","description":"Discussion board channels - Implements the channel partitioning and top-level division requirement for the discussion platform (see section 3 of requirements analysis: Features & User Journeys, Thread & Post creation, browsing/search, multi-tiered access). This table allows the forum to be segmented into overarching channels (e.g., Politics, Economics) under which sections and discussions can be organized. Maintains strict 3NF compliance by storing only atomic, non-derived properties. For example, enables the board to have a \"Politics\" or \"Economics\" channel, each with their own categories and threads. Key relationships: referenced by sections and as entry points for content organization. Special behaviors: channel code is unique, soft deletion supported for reversibility.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique channel identifier for internal reference, used throughout the board's system for relationships and indexing."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Code for the channel - Implements unique channel addressing as required by multi-channel design. Used for URLs or internal routing (e.g., 'pol', 'eco'). Ensures normalization by not repeating names; links to sections and system routing. Example: 'eco'.","nullable":false},{"name":"name","type":"string","description":"Human-readable channel name - The full descriptive name for display and selection (e.g., 'Politics', 'Economics'). Ensures atomic representation of the channel label. Directly surfaced in admin/UI selection.","nullable":false},{"name":"description","type":"string","description":"Channel description - Implements requirement for discoverability and clarity. Shown in listings, aids in search and context for users. Purely informational; maintaining normalization by not repeating section/category descriptions. Example: 'Discussion of global economic issues.'.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when channel was created - Implements auditability requirement. Maintains normalization by recording only creation event. Used for admin/audit views. Example: '2024-07-22T20:32:00Z'.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp - Auditing/moderation conformity. Used for system logs and reflecting latest channel changes per non-functional security and audit requirements.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for channel - Implements requirement for reversibility and audit trail of admin/mod actions. Null if not deleted. Used to support undo and regulatory compliance. Example: '2025-07-20T15:01:00Z' or null.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"discussion_board_sections","description":"Discussion board sections - Implements the requirement for sub-division within channels (see feature requirements: Thread & Post Creation, Section/Forum hierarchy). Each section exists within a channel, allowing granular organization (e.g., 'Legislation', 'Global Markets'). 3NF compliance maintained by isolating only section attributes in this entity. For example, a section 'Legislation' under 'Politics' channel. Sections directly reference their parent channel. Key relationships: belongs to a channel, parent to threads/posts (handled in other components). Special behaviors: unique section code within a channel, soft deletion supported.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique section identifier (UUID). Used as the reference for all section-level operations and relations."},"foreignFields":[{"name":"discussion_board_channel_id","type":"uuid","description":"Belonged channel's {@link discussion_board_channels.id} - Associates this section with a parent channel. Enforces 1:N relationship. Required, not nullable. Example: points 'Legislation' under 'Politics' channel.","relation":{"name":"channel","type":"belongsTo","targetModel":"discussion_board_channels","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"code","type":"string","description":"Unique section code within channel - Used for routing and management (e.g., 'legis', 'markets'). Unique per channel. Maintains normalization; not repeated in other entities. Example: 'legis'.","nullable":false},{"name":"name","type":"string","description":"Section name - Implements user-facing display and admin management. Pure atomic value. Example: 'Legislation'. Used in UI, filtering, and management tools.","nullable":false},{"name":"description","type":"string","description":"Section description - Supports user discoverability, as required for guided navigation. Example: 'Debate on government legislation.' Maintains normalization by avoiding duplication across sections/channels.","nullable":true},{"name":"created_at","type":"datetime","description":"Section creation timestamp - Implements record traceability as per audit requirements. Used for admin views. Example: '2024-07-22T20:44:00Z'.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modified timestamp for the section - For audit/compliance and UI sorting as per non-functional requirements.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp - Implements reversibility of moderation/admin actions. Null if never deleted. Purely for compliance and undo.","nullable":true}],"uniqueIndexes":[{"fieldNames":["discussion_board_channel_id","code"],"unique":true}],"plainIndexes":[{"fieldNames":["discussion_board_channel_id"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"discussion_board_configurations","description":"Discussion board configuration key-values - Implements the requirement for tunable system-wide settings and feature flags (see administrative/technical requirements). This enables administrators to control platform behavior dynamically (e.g., posting limits, enabled feature toggles, UI settings) without code deployments. 3NF enforced by storing atomic key-value pairs, not embedding configuration across multiple tables. For example, can store 'max_post_length', 'allow_guest_voting', etc. Relationships: none (global settings); referenced at runtime. Special behaviors: keys are unique, values are simple strings/JSON-serializable.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique configuration row identifier."},"foreignFields":[],"plainFields":[{"name":"key","type":"string","description":"Configuration setting key - Implements the global configuration requirement. Used as the identifier for lookups/updates. Example: 'max_post_length'. Uniqueness enforced platform-wide. Maintains normalization by not repeating in multiple places.","nullable":false},{"name":"value","type":"string","description":"Configuration value - Implements the actual set value for the configuration key. May be JSON or string. Atomic data element. Example: '10000', '{\"enable\":true}'.","nullable":false},{"name":"description","type":"string","description":"Description of what this configuration controls - Provides admin-facing understanding of each configuration. Example: 'Sets the maximum number of characters allowed in a post.' Used in admin dashboards only. Maintains normalization and documentation integrity.","nullable":true},{"name":"created_at","type":"datetime","description":"Configuration created at - Traceability and audit, per system and compliance requirements. Example: '2024-07-22T20:56:00Z'.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp for last update to this configuration - For audit trails and system config management.","nullable":false}],"uniqueIndexes":[{"fieldNames":["key"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"discussion_board_guests","description":"Discussion Board Guest Account - This implements the requirement for unauthenticated user sessions, supporting view-only access (see F01, F06 in requirements). This model stores anonymous session metadata to support audit logging, moderation traceability, and potentially soft-identification for abuse prevention. Maintains 3NF by storing only session-atomic data rather than duplicating member or device data. Example: tracking a guest's session for read-only content viewing, reporting, or rate limiting. Key relationships: none (guests are not linked to posts, only tracked passively). Special behaviors: Guests can browse public threads but cannot interact or author posts/comments. No business relationships to members or content entities directly. Session expiration and enrichment handled in application layer, not schema.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the guest session."},"foreignFields":[],"plainFields":[{"name":"session_token","type":"string","description":"Session token for tracking guest user's browsing session. Implements anonymous identification requirement for viewing, rate limiting, and audit scenarios. Ensures normalization by separating guest activity from member identities. Example: \"guest_ae892ded9b5e2da4\". Immutable per guest session.","nullable":false},{"name":"ip_address","type":"string","description":"IP address associated with the guest session. Implements audit and abuse mitigation requirements (see security section). Ensures each session can be traced for moderation or abuse prevention. Example: \"203.0.113.42\". May be anonymized or truncated per privacy rules.","nullable":false},{"name":"user_agent","type":"string","description":"User agent string from the guest's browser/device. Implements security and analytics requirement. Normalized: atomic per browsing session, no aggregation. Example: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Firefox/91.0\".","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when guest session started. Implements audit and moderation traceability. Ensures normalization by not storing calculated or truncated intervals. Example usage: session start logging, abuse pattern analysis.","nullable":false},{"name":"expires_at","type":"datetime","description":"Expiration timestamp for guest session validity. Implements security requirement for limiting the duration of anonymous access (see non-functional requirements). Ensures 3NF by storing atomic time values only. Example: 24 hours from session creation.","nullable":false}],"uniqueIndexes":[{"fieldNames":["session_token"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["ip_address"]}],"ginIndexes":[]},{"name":"discussion_board_members","description":"Discussion Board Member Account - Implements the core requirement for registered, authenticated users who participate in discussions (see F02, F03, F07, and user journeys). This model stores essential profile, authentication, and state information for each member, maintaining strict 3NF separation from moderator/admin roles and content. Used for identity, interaction, notification, and access control. Example: A member creates threads, replies, votes, or reports content. Key relationships: Moderators and administrators are separately modeled for role escalation; foreign keys reference only when action escalation or logs are needed. Special behaviors: Member-level fields only (role-based logic handled in application and foreign models). Password policies, hashing, and verification are outside scope (handled by auth provider interface).","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the member account."},"foreignFields":[],"plainFields":[{"name":"username","type":"string","description":"Member's unique public username. Implements profile, notification, and search functionality. Example: \"democracyFan_21\". Ensures normalization as user identity is atomic and required.","nullable":false},{"name":"email","type":"string","description":"Email address for system notifications, password recovery, and authentication purposes. Implements F07 notification delivery and F02/F03 account validation. Example: \"jane.doe@email.com\". Unique per member; normalization by storing as standalone atomic value.","nullable":false},{"name":"hashed_password","type":"string","description":"Storage for password hash (never raw password). Required for credential validation compliance. Ensures normalization—authentication security separated from business logic. Example: argon2id hash string; never stored or retrieved as raw passwords.","nullable":false},{"name":"display_name","type":"string","description":"Display name for friendly presentation in forums. Implements member-facing UI requirement; can be changed by user. Example: \"Jane D.\" Normalized: separate from username and email for privacy/configurability.","nullable":false},{"name":"profile_image_url","type":"uri","description":"Optional URI to member's profile image. Implements UX profile presentation requirements. Example: \"https://cdn.site.com/profiles/member-42.jpg\". Null if not set. Ensures data normalization—only one atomic string per member.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether the member account is active (able to log in/interact). Implements moderation/suspension workflows. Example: false for banned or deactivated members. Ensures normalization by storing state per member without embedding logic.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp of member registration. Implements registration timestamp recording requirement (see audit trail & engagement KPIs). Example usage: tracking new sign-ups per day.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when member information was last updated. Implements audit/update history in line with privacy and recoverability requirements. Updated per profile or credential change. Ensures normalization—no aggregated edit history kept here.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp for soft deletion (member removal by request or mod action). Implements reversibility and audit trail per requirements. Example usage: member invokes right to erasure; row remains for audit, but does not appear in UX. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["username"],"unique":true},{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["is_active"]}],"ginIndexes":[{"fieldName":"display_name"}]},{"name":"discussion_board_moderators","description":"Discussion Board Moderator Role - Implements the requirement for elevated content moderation privileges (see F04, F08, F07). This model enables escalation of accounts to moderator status and tracks their moderator-specific attributes. Normalized structure: distinct from base member data (which they extend via foreign key), ensuring single source of truth for credentials and user identity. Example: a moderator reviews reports, edits/hides comments, and pins threads. Key relationships: 1:1 with member; foreign key to `discussion_board_members.id` for role escalation. Special behaviors: All moderator-only fields (e.g., assignment to forums) go here; never duplicate member/account data. Action logs are tracked in moderation tables, not here.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the moderator role assignment."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Target member's {@link discussion_board_members.id} - Uniquely identifies which registered member has been assigned moderator role. Implements role escalation logic (see authorization specs).","relation":{"name":"moderator_member","fields":["member_id"],"references":["id"],"model":"discussion_board_members","targetModel":"discussion_board_members","onDelete":"CASCADE"},"unique":true,"nullable":false}],"plainFields":[{"name":"assigned_at","type":"datetime","description":"Timestamp when member was assigned moderator role. Supports audit trail and moderator onboarding tracking in line with security specs. Ensures normalization; never stores calculated tenure.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when moderator role was revoked. Null if currently active. Implements moderation audit and access control reversibility (see non-functional requirements). Ensures role status transitions are atomic and auditable.","nullable":true}],"uniqueIndexes":[{"fieldNames":["member_id"],"unique":true}],"plainIndexes":[{"fieldNames":["assigned_at"]}],"ginIndexes":[]},{"name":"discussion_board_administrators","description":"Discussion Board Administrator Role - Implements the specification for system-wide managerial privileges and site configuration (see requirements F05, F04, admin user journeys). Tracks which member accounts hold administrative access, supporting assignment, audit, and privilege escalation. Normalized by linking only to member entity (no duplicate account data). Example: an administrator assigns roles, configures settings, and oversees all board operations. Key relationships: 1:1 with member, foreign key to `discussion_board_members.id`. Special behaviors: All admin-only fields (escalation, audit, assignment) managed here; their content activity is handled via base member model. Role logs and audits are stored elsewhere.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the administrator role assignment."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Target member's {@link discussion_board_members.id} - Identifies registered user escalated to administrator role. Implements principal site configuration authority and reversible privilege assignment. Ensures referential integrity with users table.","relation":{"name":"administrator_member","fields":["member_id"],"references":["id"],"model":"discussion_board_members","targetModel":"discussion_board_members","onDelete":"CASCADE"},"unique":true,"nullable":false}],"plainFields":[{"name":"assigned_at","type":"datetime","description":"Timestamp when member was assigned administrator role. Implements admin audit trail (see requirements) and onboarding reporting. Ensures normalization by non-redundant, per-assignment timestamps only.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when admin role was revoked. Null if currently active. Fulfills audit and security reversibility requirements for admin privileges.","nullable":true}],"uniqueIndexes":[{"fieldNames":["member_id"],"unique":true}],"plainIndexes":[{"fieldNames":["assigned_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-articles.prisma","namespace":"Articles","models":[{"name":"discussion_board_threads","description":"Discussion Thread - This implements requirements F01, F02, F06 from the requirements analysis: Allows members to initiate new topical discussions and enables all users to view public threads. Business explanation: A thread is the main top-level discussion unit containing posts. Maintains 3NF compliance by storing only thread metadata and references to posts, categories, tags, and creator. For example, members start new threads; everyone can browse them; threads can be searched or filtered. Key relationships: references to discussion_board_members (creator), discussion_board_categories, possible cross-linking with tags, posts. Special behaviors: Title full-text search, thread must be open or closed (soft-delete for moderation, not hard delete).","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Uniquely identifies each thread record."},"foreignFields":[{"name":"discussion_board_member_id","type":"uuid","description":"Creator's {@link discussion_board_members.id}. Links the thread to the member who created it.","relation":{"name":"member_threads","targetModel":"discussion_board_members","targetField":"id"},"unique":false,"nullable":false},{"name":"discussion_board_category_id","type":"uuid","description":"Category's {@link discussion_board_categories.id}. Links the thread to its topic category.","relation":{"name":"category_threads","targetModel":"discussion_board_categories","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Thread Title - Implements F01, F02, F06. The descriptive title of the discussion, used for search, browsing, and filtering. Ensures normalization by separating the thread's identity from post content. For example: '2025 National Budget Analysis'. Cannot be null.","nullable":false},{"name":"body","type":"string","description":"Thread Body - Implements F01, F02. The initial content of the thread (opening post). Provides context for members and is indexed for full-text search. For example: An analysis or question posed for discussion. Cannot be null.","nullable":false},{"name":"is_pinned","type":"boolean","description":"Pinned Flag - Implements moderation requirement F04. Indicates if moderators/admins have pinned this thread for visibility. Ensures normalization by using an atomic boolean rather than flagging / status field. For example: a thread is pinned to top for community reference.","nullable":false},{"name":"is_closed","type":"boolean","description":"Closed Flag - Implements moderation requirement for restricting new posts (F04). Indicates if no further posts/comments can be added. Ensures normalization by using atomic flag. For example: Off-topic/completed threads may be closed by a moderator. Cannot be null.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation Timestamp - Records when the thread was created. Required for audit, sorting, and moderation. Ensures atomic representation of time.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update Timestamp - Records last update to thread metadata (not posts/comments). Maintains normalization by tracking only thread-level changes.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete Timestamp - Implements F04 for reversible moderation actions. If set, the thread is considered deleted but can be restored. Fulfills business need for reversible actions. Nullable as not all threads are deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["title","discussion_board_category_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["is_pinned","created_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"body"}]},{"name":"discussion_board_posts","description":"Discussion Board Post - Implements F02, F03 from requirements analysis: Enables members to add content within threads (as root or reply posts). Business explanation: A post is either the thread's opening message or a subsequent reply (can be a 'main' post or be used for splitting off sub-topics). Maintains 3NF: post content, author, thread are atomic. For example: User A posts detailed argument in thread. Key relationships: linked to thread, author (member), and can have attachments. Special behaviors: Soft-delete for moderation, no calculated fields, auditing via timestamps.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Uniquely identifies each post record."},"foreignFields":[{"name":"discussion_board_thread_id","type":"uuid","description":"Parent Thread's {@link discussion_board_threads.id}. Associates this post with its parent discussion thread. Required for all posts.","relation":{"name":"thread_posts","targetModel":"discussion_board_threads","targetField":"id"},"unique":false,"nullable":false},{"name":"discussion_board_member_id","type":"uuid","description":"Creator's {@link discussion_board_members.id}. Refers to the member who authored this post.","relation":{"name":"member_posts","targetModel":"discussion_board_members","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"body","type":"string","description":"Post Body - Main content of the post, implements F02, F03. Users express ideas, arguments, or questions here. Ensures normalization (atomic post content, not mixed thread data). For example: A member writes a reply in a debate. Cannot be null.","nullable":false},{"name":"is_edited","type":"boolean","description":"Edit Flag - Indicates if the content was changed after creation. Maintains auditability in line with business rules. For example: Post shows 'edited' tag if changed.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation Timestamp - When the post was created. Used for sort, moderation audit.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update Timestamp - When post content last updated. For moderation and client freshness.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete Timestamp - Implements F04 moderation rule for reversible deletions. Nullable.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["discussion_board_thread_id","created_at"]}],"ginIndexes":[{"fieldName":"body"}]},{"name":"discussion_board_comments","description":"Discussion Board Comment - Implements F03, F04, F08 from requirements. Allows members to add nested commentary on posts, supporting deep discussion. Maintains 3NF by referencing post, parent comment, and author atomically. For example: Members can reply to posts or create deeply threaded comments. Key relationships: references discussion_board_posts, self (parent_id), and discussion_board_members. Special behaviors: Soft-delete for moderation, edit tracking, supports full-text search for moderation/retrieval.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Uniquely identifies each comment."},"foreignFields":[{"name":"discussion_board_post_id","type":"uuid","description":"Parent Post's {@link discussion_board_posts.id}. Links the comment to the post it references. Required.","relation":{"name":"post_comments","targetModel":"discussion_board_posts","targetField":"id"},"unique":false,"nullable":false},{"name":"parent_id","type":"uuid","description":"Parent Comment's {@link discussion_board_comments.id}. Supports nested (threaded) comments. Nullable for root-level comments.","relation":{"name":"parent_comment","targetModel":"discussion_board_comments","targetField":"id","mappingName":"recursive"},"unique":false,"nullable":true},{"name":"discussion_board_member_id","type":"uuid","description":"Comment Creator's {@link discussion_board_members.id}. Identifies the member who wrote the comment. Required.","relation":{"name":"member_comments","targetModel":"discussion_board_members","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"body","type":"string","description":"Comment Body - Implements F03, F08. Contains the textual or media commentary, normalized to separate from parent entities. For example: Member writes 'I disagree with this point...' in reply to a post or another comment. Cannot be null.","nullable":false},{"name":"is_edited","type":"boolean","description":"Edit Flag - True if content was modified after creation. Maintains clarity for users reading historical comments.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation Timestamp - When the comment was submitted. Used for sorting, moderation, audits.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update Timestamp - When the comment was last edited. Supports moderation audit trails.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete Timestamp - For moderation reversibility. Nullable.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["discussion_board_post_id","created_at"]}],"ginIndexes":[{"fieldName":"body"}]},{"name":"discussion_board_attachments","description":"Discussion Board Attachment - Implements F02 (posts) and F03 (comments) for supporting attached files with user submissions. Normalizes file references; each attachment belongs to either a post or a comment, never both. For example: a member uploads a PDF or image to support a post or a comment. Maintains 3NF by holding only attachment-specific metadata and foreign key to the parent object. Key relationships: optional links to discussion_board_posts or discussion_board_comments (one, never both). Special behaviors: Soft-delete for moderation, uniqueness enforced on content hash for deduplication.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Uniquely identifies each attachment record."},"foreignFields":[{"name":"discussion_board_post_id","type":"uuid","description":"Attached Post's {@link discussion_board_posts.id}. If not null, the attachment is linked to a post. Nullable to support comment attachments.","relation":{"name":"post_attachments","targetModel":"discussion_board_posts","targetField":"id"},"unique":false,"nullable":true},{"name":"discussion_board_comment_id","type":"uuid","description":"Attached Comment's {@link discussion_board_comments.id}. If not null, this attachment is linked to a comment. Nullable to support post attachments.","relation":{"name":"comment_attachments","targetModel":"discussion_board_comments","targetField":"id"},"unique":false,"nullable":true},{"name":"discussion_board_member_id","type":"uuid","description":"Uploader's {@link discussion_board_members.id}. Tracks the member who uploaded the attachment. Required.","relation":{"name":"member_attachments","targetModel":"discussion_board_members","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"file_name","type":"string","description":"Attachment File Name - Stores the original name of the uploaded file. Normalizes metadata storage. For example: 'research-data-2025.pdf'. Cannot be null.","nullable":false},{"name":"file_uri","type":"uri","description":"Attachment File URI - Points to the file's storage location (S3, CDN, etc). Maintains atomic data management without storing file content. For example: 'https://cdn.site.com/files/1234.pdf'. Cannot be null.","nullable":false},{"name":"content_type","type":"string","description":"Mime Content Type - Describes file format for retrieval. For example: 'application/pdf', 'image/png'. Maintains normalization. Cannot be null.","nullable":false},{"name":"content_hash","type":"string","description":"Content Hash - Implements uniqueness; stores file SHA-256 or similar fingerprint for deduplication. For example: 'ab12cd34...'. Cannot be null.","nullable":false},{"name":"created_at","type":"datetime","description":"Upload Timestamp - Records when attachment was added. For audit/tracing. Cannot be null.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete Timestamp - Implements F04 for reversible moderation actions. Nullable as not all attachments are deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["content_hash"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-moderation.prisma","namespace":"Moderation","models":[{"name":"discussion_board_reports","description":"Discussion Board Reports - Implements reporting/flagging requirements (Requirement F08) from the requirements doc. Allows members to flag content for moderator review. Fully normalized (3NF): one row per report, atomic fields for each responsibility. Used for moderation triage and compliance audit trails. Key relationships: member who reported, target content (thread/post/comment), assigned moderator/action. Audit trail and status tracking. Example: a member reports a spam comment. Special: supports soft delete, flexible target fields.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the report record."},"foreignFields":[{"name":"reporter_member_id","type":"uuid","description":"Reporter member's {@link discussion_board_members.id}. Indicates who submitted this report.","relation":{"name":"fk_reports_reporter_member_id","fields":["reporter_member_id"],"references":["id"],"targetModel":"discussion_board_members"},"unique":false,"nullable":false},{"name":"moderator_id","type":"uuid","description":"Assigned/reviewing moderator's {@link discussion_board_moderators.id}. Nullable until a moderator claims the report.","relation":{"name":"fk_reports_moderator_id","fields":["moderator_id"],"references":["id"],"targetModel":"discussion_board_moderators"},"unique":false,"nullable":true},{"name":"thread_id","type":"uuid","description":"Reported thread {@link discussion_board_threads.id} (used if this is a thread report, otherwise null).","relation":{"name":"fk_reports_thread_id","fields":["thread_id"],"references":["id"],"targetModel":"discussion_board_threads"},"unique":false,"nullable":true},{"name":"post_id","type":"uuid","description":"Reported post {@link discussion_board_posts.id} (used if this is a post report, otherwise null).","relation":{"name":"fk_reports_post_id","fields":["post_id"],"references":["id"],"targetModel":"discussion_board_posts"},"unique":false,"nullable":true},{"name":"comment_id","type":"uuid","description":"Reported comment {@link discussion_board_comments.id} (used if this is a comment report, otherwise null).","relation":{"name":"fk_reports_comment_id","fields":["comment_id"],"references":["id"],"targetModel":"discussion_board_comments"},"unique":false,"nullable":true}],"plainFields":[{"name":"reason","type":"string","description":"Reason for reporting - Required; textual explanation why this was flagged (e.g., 'spam', 'offensive'). 3NF: atomic motivation, not free-form moderation notes.","nullable":false},{"name":"status","type":"string","description":"Moderation/report workflow state (e.g., 'pending','under_review','resolved','dismissed'). Used for state-machine mod UI compliance. Required.","nullable":false},{"name":"created_at","type":"datetime","description":"Report creation timestamp for audit/ordering.","nullable":false},{"name":"resolved_at","type":"datetime","description":"When this report was resolved/closed. Nullable until action taken.","nullable":true},{"name":"resolution_notes","type":"string","description":"Moderator notes upon resolution (optional, used for moderation audit/comms). Nullable.","nullable":true},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp (nullable unless deleted); for GDPR/audit compliance.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["status"]},{"fieldNames":["reporter_member_id","created_at"]}],"ginIndexes":[{"fieldName":"reason"},{"fieldName":"resolution_notes"}]},{"name":"discussion_board_moderation_logs","description":"Discussion Board Moderation Logs - Implements moderation trace/audit requirements (Requirement F04, NFR logging/traceability) from requirements doc. One record per discrete mod action. Fully normalized (3NF): atomic action, FK moderator and content, no duplication. Used for post-event review and role compliance. Example: hiding a thread for ToS breach. Key: links moderator, atomic action, and target (any of thread/post/comment, or null for cross-content actions). Special: always immutable after write—permanent record.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for moderation log record."},"foreignFields":[{"name":"moderator_id","type":"uuid","description":"Moderator who took this action - {@link discussion_board_moderators.id}.","relation":{"name":"fk_modlog_moderator_id","fields":["moderator_id"],"references":["id"],"targetModel":"discussion_board_moderators"},"unique":false,"nullable":false},{"name":"thread_id","type":"uuid","description":"Target thread {@link discussion_board_threads.id} (nullable if this is not on a thread).","relation":{"name":"fk_modlog_thread_id","fields":["thread_id"],"references":["id"],"targetModel":"discussion_board_threads"},"unique":false,"nullable":true},{"name":"post_id","type":"uuid","description":"Target post {@link discussion_board_posts.id} (nullable if not applicable).","relation":{"name":"fk_modlog_post_id","fields":["post_id"],"references":["id"],"targetModel":"discussion_board_posts"},"unique":false,"nullable":true},{"name":"comment_id","type":"uuid","description":"Target comment {@link discussion_board_comments.id} (nullable unless a comment).","relation":{"name":"fk_modlog_comment_id","fields":["comment_id"],"references":["id"],"targetModel":"discussion_board_comments"},"unique":false,"nullable":true}],"plainFields":[{"name":"action","type":"string","description":"Action performed (e.g., 'hide','delete','warn','edit'). Each log is a single event. Required.","nullable":false},{"name":"action_reason","type":"string","description":"Reason/justification for action. Optional/free-form for additional transparency in logs. Nullable.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the moderation event occurred. Required.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["moderator_id","created_at"]}],"ginIndexes":[{"fieldName":"action"},{"fieldName":"action_reason"}]},{"name":"discussion_board_warnings","description":"Discussion Board Warnings - Implements formal user warning tracking (Req F04: user management). Each record logs a warning from moderator to member. 3NF: member, moderator, rationale separated and atomic. Drives escalation/ban logic. Key relations: target member and acting moderator FKs. Example: warning for spam/harassment. Soft delete and optional expiry supported.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for warning record."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Warned member's {@link discussion_board_members.id}. Target of the warning.","relation":{"name":"fk_warn_member_id","fields":["member_id"],"references":["id"],"targetModel":"discussion_board_members"},"unique":false,"nullable":false},{"name":"moderator_id","type":"uuid","description":"Moderator who issued the warning {@link discussion_board_moderators.id}.","relation":{"name":"fk_warn_moderator_id","fields":["moderator_id"],"references":["id"],"targetModel":"discussion_board_moderators"},"unique":false,"nullable":false}],"plainFields":[{"name":"warning_type","type":"string","description":"Type/category of warning (e.g., 'spam','harassment'). Atomic, avoids mixing categorization with rationale. Required.","nullable":false},{"name":"message","type":"string","description":"Moderator's message to member. Human-facing rationale, not for system logic. Required.","nullable":false},{"name":"created_at","type":"datetime","description":"When the warning was issued. Required for escalation logic/audit trail.","nullable":false},{"name":"expires_at","type":"datetime","description":"Optional expiry time (if the warning has an expiration). Nullable for permanent warnings.","nullable":true},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp (nullable unless deleted/expired for GDPR).","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["member_id","created_at"]}],"ginIndexes":[{"fieldName":"message"}]},{"name":"discussion_board_bans","description":"Discussion Board Bans - Implements user exclusion/ban process (Req F04: removal/escalation). Each row is a single ban event (either permanent or temporary). Fully normalized: reason, scope, timeline atomic and FK relations. Used for automated and manual enforcement of community guidelines. Key: member, moderator, fully documented scope/dates. Example: ban after multiple warnings. Nullable expires_at for permanent bans. Audit trail and soft-delete compliant.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the ban record."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Banned member {@link discussion_board_members.id}. Target user.","relation":{"name":"fk_ban_member_id","fields":["member_id"],"references":["id"],"targetModel":"discussion_board_members"},"unique":false,"nullable":false},{"name":"moderator_id","type":"uuid","description":"Moderator who imposed the ban {@link discussion_board_moderators.id}.","relation":{"name":"fk_ban_moderator_id","fields":["moderator_id"],"references":["id"],"targetModel":"discussion_board_moderators"},"unique":false,"nullable":false}],"plainFields":[{"name":"ban_reason","type":"string","description":"Explanation for the ban (e.g., 'multiple ToS violations'). Atomic, required.","nullable":false},{"name":"permanent","type":"boolean","description":"Is this ban permanent? true if no expires_at, else false. Required.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the ban was imposed. Audit/fairness use. Required.","nullable":false},{"name":"expires_at","type":"datetime","description":"When this ban expires (null = permanent). For enforcement automation.","nullable":true},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp (nullable unless lifted/expired for GDPR/audit).","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["member_id","created_at"]}],"ginIndexes":[{"fieldName":"ban_reason"}]}]},{"filename":"schema-05-notifications.prisma","namespace":"Notifications","models":[{"name":"discussion_board_notifications","description":"Discussion Board Notification Entity - This implements F07 (Notifications) from the requirements document.\n\nThis table stores notification events for users, representing a discrete alert or message triggered by activity (such as replies, mentions, moderation actions, or subscriptions) intended for a user. Maintains 3NF by only storing atomic, event-specific data. For example, when a member is mentioned in a reply, a new notification is generated referencing the relevant post. Key relationships: links recipients (members) and actors who trigger events. Special behaviors: Soft-deletion, delivery, and read-tracking.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for each notification event."},"foreignFields":[{"name":"recipient_member_id","type":"uuid","description":"Recipient's {@link discussion_board_members.id} - The member who receives the notification. Implements user notifications (F07).","relation":{"name":"recipient_member","targetModel":"discussion_board_members","targetField":"id","mappingName":"discussion_board_notifications_of_recipient_member_id"},"unique":false,"nullable":false},{"name":"trigger_actor_id","type":"uuid","description":"Initiator's {@link discussion_board_members.id} - The user who performed the action triggering the notification (e.g., commenter, moderator). Nullable for system notifications.","relation":{"name":"trigger_actor_member","targetModel":"discussion_board_members","targetField":"id","mappingName":"discussion_board_notifications_of_trigger_actor_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"type","type":"string","description":"Type/Category of the notification (e.g., reply, mention, moderation, subscription). Implements notification type from requirements F07.","nullable":false},{"name":"content_preview","type":"string","description":"Short text preview of the event that caused the notification (e.g., comment excerpt, post title). Atomic, non-derived data to comply with 3NF.","nullable":true},{"name":"url","type":"uri","description":"Link to the resource/content associated with the notification (thread, comment, moderation action). Normalized as a URI for direct navigation. Implements context from functional requirements (F07).","nullable":false},{"name":"read","type":"boolean","description":"Flag indicating if the notification has been read by the user. Enables accurate UX state and compliance with UX requirements.","nullable":false},{"name":"delivered_at","type":"datetime","description":"Timestamp when notification delivery was completed (in-app or email). For audit trails and delivery tracking.","nullable":true},{"name":"created_at","type":"datetime","description":"Datetime when the notification was generated. For ordering, filtering, and audit trails.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-deletion timestamp for compliance, reversibility, and audit support. Null if active, set when deleted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["recipient_member_id","read"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"content_preview"}]},{"name":"discussion_board_subscriptions","description":"Discussion Board Subscription Entity - Implements F07 (Notifications) and supports content follow/subscription flows. Tracks which members subscribe to which content (thread, section, tag, etc.), enabling notification delivery when followed content has new events. Maintains 3NF by only storing atomic member-to-content relations. Uniqueness enforced for (member, target type, target ID) per business rules.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for each subscription relationship."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Member {@link discussion_board_members.id} - The user subscribing to the resource. Implements personalized notification flows.","relation":{"name":"member","targetModel":"discussion_board_members","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"target_type","type":"string","description":"Type of resource being followed (e.g., thread, section, tag). Defines polymorphic subscription nature per requirements analysis and user journeys.","nullable":false},{"name":"target_id","type":"uuid","description":"ID of the resource being followed (foreign key to thread/section/tag tables, not materialized in this file). Strictly normalized so only atomic linking occurs here.","nullable":false},{"name":"created_at","type":"datetime","description":"Datetime when subscription was created. For sorting/filtering and retention/audit requirements.","nullable":false}],"uniqueIndexes":[{"fieldNames":["member_id","target_type","target_id"],"unique":true}],"plainIndexes":[{"fieldNames":["member_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"discussion_board_mentions","description":"Discussion Board Mention Entity - Implements F07 (Notifications) for '@mention' events as documented in requirements. Each record is an instance of a member being mentioned (e.g., via '@username') in a post, comment, or thread. Strictly atomic: links mention actor, target, and referenced content only. Used to drive mention notifications and auditing. Uniqueness constraint ensures single mentions per content context.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for each mention event."},"foreignFields":[{"name":"mentioned_member_id","type":"uuid","description":"Target's {@link discussion_board_members.id} - The user who was mentioned. Implements target for mention notifications.","relation":{"name":"mentioned_member","targetModel":"discussion_board_members","targetField":"id","mappingName":"discussion_board_mentions_of_mentioned_member_id"},"unique":false,"nullable":false},{"name":"actor_member_id","type":"uuid","description":"Mentioner's {@link discussion_board_members.id} - The user who performed the mention action. Traceability for originator.","relation":{"name":"actor_member","targetModel":"discussion_board_members","targetField":"id","mappingName":"discussion_board_mentions_of_actor_member_id"},"unique":false,"nullable":false}],"plainFields":[{"name":"content_type","type":"string","description":"Type of content where the mention occurred (e.g., post, comment, thread), supporting polymorphic relations as per requirements.","nullable":false},{"name":"content_id","type":"uuid","description":"ID of the content (post/comment/thread) where the mention was made. Enforces normalization as only atomic foreign link.","nullable":false},{"name":"created_at","type":"datetime","description":"Datetime mention was created. For chronological and notification tracking.","nullable":false}],"uniqueIndexes":[{"fieldNames":["actor_member_id","mentioned_member_id","content_type","content_id"],"unique":true}],"plainIndexes":[{"fieldNames":["mentioned_member_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-06-votes.prisma","namespace":"Votes","models":[{"name":"discussion_board_vote_types","description":"Vote Type Entity - This implements the requirements for supporting different voting mechanisms (e.g., upvote, downvote, like, etc.) as needed for features like voting threads, posts, or comments (from RA Section 3: F03 and Features 2.2). \n\nBusiness explanation: This table contains specific types of votes allowed in the system. Keeps the vote action design extensible and normalized. Maintains 3NF by separating static vote-type data from actual votes or users. For example, 'upvote' and 'downvote' are two types stored here and referenced by individual votes.\n\nKey relationships: Referenced by {@link discussion_board_votes.vote_type_id} to indicate what kind of vote each vote is. Used by various voting features for content items.\nSpecial behaviors: System integrity—vote records must always reference a valid type.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for each vote type entry."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Vote type code - Implements code for programmatic referencing (e.g., 'upvote', 'downvote'). Ensures normalization by storing type semantics here. Example: 'upvote'. Unique per vote type.","nullable":false},{"name":"name","type":"string","description":"Vote type display name - Human-friendly name for the vote type (e.g., 'Upvote', 'Downvote'). Keeps display strings separate from logic. Example: 'Upvote'.","nullable":false},{"name":"description","type":"string","description":"Description of the vote type - Explains what this vote type represents or when to use it. Example: 'Indicates positive reception from users.' Maintains normalization by isolating type explanations here. Nullable for simpler types.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp. Tracks when this vote type was added to the system. Required for audit trails. 3NF-compliant field.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update time. For auditability and change tracking, required for compliance and good record-keeping. 3NF-compliant.","nullable":false}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"discussion_board_votes","description":"Vote Entity - This implements the requirement to record user votes on threads, posts, or comments (from RA Section 3: F03 and Features 2.2). \n\nBusiness explanation: Each record is a single vote by a user on a specific content item (thread/post/comment) using a particular vote type. This model maintains full normalization by separating votes from users and content. For example, a user upvotes a post or downvotes a comment—each as a row in this table.\n\nKey relationships: Foreign keys reference Actors (voter), Articles (the item being voted), and Vote Types. Enables features like upvote/downvote on content and ensures referential integrity. Critical for voting UX and analytics. All votes reference existing vote types and voters.\nSpecial behaviors: Uniqueness enforcement (voter cannot cast same-type vote on same item twice), full audit trail (created_at, updated_at).","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for each vote entry."},"foreignFields":[{"name":"voter_id","type":"uuid","description":"Voter's {@link discussion_board_members.id} (or another Actor-role table). Indicates who cast the vote. This is a required reference for all votes and enables construction of voting histories and restriction enforcement (e.g., one vote per user per item).","relation":{"name":"discussion_board_members_fk","targetModel":"discussion_board_members","field":"id"},"unique":false,"nullable":false},{"name":"vote_type_id","type":"uuid","description":"Vote type's {@link discussion_board_vote_types.id} field. Defines what kind of vote this is (e.g., upvote, downvote).","relation":{"name":"discussion_board_vote_types_fk","targetModel":"discussion_board_vote_types","field":"id"},"unique":false,"nullable":false},{"name":"thread_id","type":"uuid","description":"Target thread's {@link discussion_board_threads.id} field, if the vote is cast on a thread. Nullable because not all votes are on threads (some on posts/comments).","relation":{"name":"discussion_board_threads_fk","targetModel":"discussion_board_threads","field":"id"},"unique":false,"nullable":true},{"name":"post_id","type":"uuid","description":"Target post's {@link discussion_board_posts.id} field, if the vote is cast on a post. Nullable because not all votes are on posts (some on threads/comments).","relation":{"name":"discussion_board_posts_fk","targetModel":"discussion_board_posts","field":"id"},"unique":false,"nullable":true},{"name":"comment_id","type":"uuid","description":"Target comment's {@link discussion_board_comments.id} field, if the vote is cast on a comment. Nullable because not all votes are on comments (some on threads/posts).","relation":{"name":"discussion_board_comments_fk","targetModel":"discussion_board_comments","field":"id"},"unique":false,"nullable":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Vote timestamp. Shows when this vote was cast. For full accountability, auditing, and analysis. 3NF-compliant.","nullable":false},{"name":"updated_at","type":"datetime","description":"When this vote record was last updated (such as in correcting a misvote). For audit log compliance and analytics. 3NF-compliant.","nullable":false}],"uniqueIndexes":[{"fieldNames":["voter_id","vote_type_id","thread_id"],"unique":true},{"fieldNames":["voter_id","vote_type_id","post_id"],"unique":true},{"fieldNames":["voter_id","vote_type_id","comment_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["vote_type_id","created_at"]},{"fieldNames":["thread_id","created_at"]},{"fieldNames":["post_id","created_at"]},{"fieldNames":["comment_id","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-07-categories.prisma","namespace":"Categories","models":[{"name":"discussion_board_tags","description":"Discussion Board Tag entity - This implements the requirement for thread and post tagging (see Features & User Journeys and Functional Requirements F06, F01). \n\nBusiness explanation: Allows categorization and searchability of threads and posts by enabling tags/keywords, which foster better content discovery and flexible filtering. Maintains 3NF compliance by separating tag definitions from application (thread/post linkage handled elsewhere). For example, a thread about 'Monetary Policy' might have tags like 'macroeconomics', 'inflation', and 'central banks'.\n\nKey relationships: May be referenced by posts/threads in other domains via M:N link tables. \nSpecial behaviors: Tag names must be unique per board; search-optimized via GIN index.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the tag record."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","description":"Tag Name - Implements requirement F06 for content search/filter. This is the unique, human-readable tag label (e.g., 'inflation'). Ensures normalization by keeping tag vocabulary distinct and atomic. For example, used for content discovery filters. Constraint: unique within context.","nullable":false},{"name":"description","type":"string","description":"Tag Description - Implements search UX and accessibility requirements. Human-readable annotation of tag purpose or scope (e.g., 'Discussion about macroeconomic inflation topics'). Supports normalization by not duplicating explanatory text elsewhere. For example, shown on tag hover in UI. Optional.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp - Implements audit/traceability requirement. When was the tag added to the system? Ensures normalization/audit compliance; enables tag lifecycle reviews. Example: '2024-07-22T14:17:31.291Z'.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp - Implements audit trail/maintenance requirements. Normalization maintained by only storing atomic state (not deltas/versions). Example usage: UI can display last modified date for moderators.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp - Implements reversible deletion (non-functional requirement). Allows safe tag removal (not physical deletion) for audit/compliance. Null if active, else indicates deletion time. For example, avoid losing historical tagging data. Optional.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"discussion_board_categories","description":"Discussion Board Category entity - This implements the requirement to organize threads/posts into broad categories or sections, as outlined in the Features/User Journeys and F01/F06 (topic discovery and advanced search).\n\nBusiness explanation: Supports a forum-like taxonomy (e.g., 'Politics', 'Economics', 'Law & Policy'). Enables self-service navigation, structuring, and filtering by higher-level groups, separated from tags (finer granularity). Maintains 3NF compliance by holding only the atomic category definition; actual assignment to threads handled by M:N link in another model.\n\nKey relationships: Referenced by threads/posts elsewhere (not here). May support parent-child relationships for subcategories in an extension.\nSpecial behaviors: Names must be unique within site/context. Used in site menus and search filters.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Unique identifier for the category record."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","description":"Category Name - Implements requirement for categorization and navigation (F01, F06). Unique, human-readable category label (e.g., 'Economics', 'Legislation'). Ensures normalization by avoiding duplication; referenced for browsing/search. Example: in UI category menus.","nullable":false},{"name":"description","type":"string","description":"Category Description - Implements usability/accessibility requirement. Defines purpose/scope for category (e.g., 'Topics about national or global economic policy'). Normalization by not storing detailed explanation in other tables. Optional.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp - For audit/traceability (requirement: audit trail, non-functional). When was this category created? Normalization: one atomic value per record. Example: in site admin panel.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp - For maintenance/audit requirements. When was this category last updated? Normalization: only current value, not change list. Example: for admins to track changes.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp - Implements requirement for reversible deletion. Null if active; if set, category is marked deleted (not removed). Maintains normalization by separating lifecycle from business fields. Example: archival for audit/compliance.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-08-search.prisma","namespace":"Search","models":[{"name":"discussion_board_search_histories","description":"Discussion Board Search Histories - This implements user search history tracking as derived from requirements F06 (Search/filter topics and posts) and F07 (Receive notifications) in the specifications. \n\nThis model records every search performed by users on the discussion board, logging keywords, filters, and search contexts for analytics and user experience enhancement. Maintains 3NF compliance by separating search event tracking from user/account/profile data. For example, allows reconstructing a user's recent search queries or admins to audit search trends.\n\nKey relationships: References the user who initiated the search (foreign key to guest or member or moderator or administrator). Can later link to search recommendations or history-based notifications. \nSpecial behaviors: Should not store actual post/thread content or denormalized search results—only search intent and metadata. Used for analytics, recommendation, and privacy review.","material":false,"primaryField":{"name":"id","type":"uuid","description":"Primary Key. Uniquely identifies each search history entry."},"foreignFields":[{"name":"actor_id","type":"uuid","description":"The user (guest, member, moderator, or admin) who executed the search. Target model's {@link discussion_board_guests.id}, {@link discussion_board_members.id}, {@link discussion_board_moderators.id}, or {@link discussion_board_administrators.id}. Implements audit and personalization requirements.","relation":{"name":"actor","targetModel":"discussion_board_guests","type":"Polymorphic","possibleModels":["discussion_board_guests","discussion_board_members","discussion_board_moderators","discussion_board_administrators"],"targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"keyword","type":"string","description":"The search keyword or terms entered by the user. Implements functional requirement F06. Ensures normalization by storing only the atomic input. Example: 'election reform', 'inflation trends'. Not nullable.","nullable":false},{"name":"filters","type":"string","description":"Serialized representation of structured search filters (e.g., tags, categories, date ranges). Implements F06 advanced search capability. Example: '{\"tags\":[\"economy\"],\"date\":\"2025-07\"}'. Optional, as user searches may not use filters.","nullable":true},{"name":"search_context","type":"string","description":"Context of search (e.g., section, channel, or specific UI location where initiated). Implements analytics/audit utility. Example: 'thread_list', 'homepage', 'admin_panel'. Optional for maximal flexibility.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the search was executed. Implements audit trail and behavioral analytics requirements. Maintains normalization by separating event time from event content. Not nullable. Example: '2025-07-22T14:17:31.291Z'.","nullable":false}],"uniqueIndexes":[{"fieldNames":["actor_id","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["keyword"]},{"fieldNames":["created_at"]}],"ginIndexes":[]}]}]}