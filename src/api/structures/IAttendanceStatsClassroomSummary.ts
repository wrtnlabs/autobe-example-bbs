import { tags } from "typia";

/**
 * 출석 통계 요약(반/학급+기간별) 정보를 담는 메인 오브젝트. 각 필드는 attendance_stats_classroom_summary
 * 테이블 직접 매핑.
 *
 * - 교사·관리자 통계 대시보드/기간별 집계에서 집계 단위별 모든 필드가 필요.
 * - 학생단위/기간단위 집계 통계 결과 반환에 사용.
 * - 모든 속성은 Prisma 주석과 파라미터 정책을 따름.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAttendanceStatsClassroomSummary = {
  /**
   * UUID(PK) 값. 하나의 반(학급)-기간 요약 요약의 고유 식별자입니다. 모든 참조, 삭제/수정 작업에서 사용됩니다.
   *
   * Prisma attendance_stats_classroom_summary.id와 직접 1:1 매핑되며, 시스템 전체에서 중복이
   * 없는 값입니다.
   */
  id: string & tags.Format<"uuid">;

  /**
   * Attendance_classroom UUID(FK).
   *
   * 어떤 반(학급)에 대한 요약인지 명시합니다. FK 제약조건에 따라 반드시 유효한 반이 존재해야만 하며, 통계 대시보드, 기간별 통계
   * 화면의 필터로도 사용됩니다.
   */
  classroom_id: string & tags.Format<"uuid">;

  /**
   * Attendace_school UUID(FK).
   *
   * 이 요약이 속한 학교/기관. 클래스와 별도로 학교 단위의 집계를 위해 반드시 구분해서 저장됩니다. 데이터의 상위 집계, 관리자 권한
   * 필터에도 활용됩니다.
   */
  school_id: string & tags.Format<"uuid">;

  /**
   * 집계 시작일(YYYY-MM-DD형식, ISO8601). 기간통계의 시작 지점을 명확히 구분하기 위한 필수 필드입니다.
   *
   * 예: "2025-03-02" 매 집계별로 중복되면 안되며, 기간필터, 관리자 대시보드 등에 사용됩니다.
   */
  period_start: string;

  /**
   * 집계 종료일(YYYY-MM-DD형식, ISO8601). 한 기간 집계의 종료 지점입니다.
   *
   * 집계/통계를 위한 고정 구간(월간/주간/학기별 등)에 따라 달라지며, 시작/종료 조합에 따라 유일성 제약이 있습니다.
   */
  period_end: string;

  /**
   * 해당 기간(classroom, period)에 출석한 학생 일수의 총합입니다.
   *
   * 교육 당국/교사 대시보드 집계에 사용되며, 학생별 일별 합산에 기반합니다.
   */
  total_present: number & tags.Type<"int32">;

  /**
   * 해당 기간(classroom, period)에 지각한 합계(학생 일수).
   *
   * 출결 이상징후 분석, 월별 대시보드에서 하이라이트/랭킹 산정 등에 활용됩니다.
   */
  total_late: number & tags.Type<"int32">;

  /**
   * 해당 기간(classroom, period)의 결석 횟수(학생 일수 기준 통계).
   *
   * 관리자/교사/학부모 통계 및 트렌드 분석에 사용됩니다.
   */
  total_absent: number & tags.Type<"int32">;

  /**
   * 해당 기간(classroom, period)에 조퇴한 총 횟수(학생 일수 기준).
   *
   * 내역 통계, 조퇴 랭킹, 이상징후 모니터링 등에 포함됩니다.
   */
  total_early_leave: number & tags.Type<"int32">;

  /**
   * 레코드 생성 시각. ISO8601 UTC 시계열.
   *
   * Prisma 스키마의 created_at과 1:1. 대시보드 신규 생성/관리 시 레퍼런스로 활용.
   */
  created_at: string & tags.Format<"date-time">;

  /**
   * 마지막 수정 시각. ISO8601 UTC 시계열.
   *
   * Prisma updated_at 필드와 1:1. 누적 통계 갱신, 변동 기록 관리에 반드시 활용됩니다.
   */
  updated_at: string & tags.Format<"date-time">;
};
export namespace IAttendanceStatsClassroomSummary {
  /**
   * 학급별 기간집계 통계 대시보드, 행정/통계 관리자/교사용 조회 등에서 사용하는 학급(반) 요약 통계 검색조건 객체.
   *
   * ClassroomId, schoolId, 기간 범위, 정렬/검색/페이징 필드 포함. Prisma
   * attendance_stats_classroom_summary 구조 참조.
   */
  export type IRequest = {
    /** 대상 학급/반 UUID(attendance_classroom.id) */
    classroomId?: string & tags.Format<"uuid">;

    /** 대상 학교 UUID(attendance_school.id) */
    schoolId?: string & tags.Format<"uuid">;

    /** 검색 기간 시작일자(YYYY-MM-DD) */
    fromPeriod?: string;

    /** 검색 기간 마지막 일자(YYYY-MM-DD) */
    toPeriod?: string;

    /** 정렬 기준 필드명(집계 시작/종료일, 합계 값 등) */
    sortBy?:
      | "periodStart"
      | "periodEnd"
      | "totalPresent"
      | "totalLate"
      | "totalAbsent"
      | "totalEarlyLeave";

    /** 정렬 방향(오름, 내림차순) */
    sortOrder?: "asc" | "desc";

    /** 요청 페이지 번호(1 base) */
    page?: number & tags.Type<"int32"> & tags.Minimum<1>;

    /** 한 페이지 최대 반환 항목(최대 200, 기본 100) */
    limit?: number & tags.Type<"int32"> & tags.Minimum<1> & tags.Maximum<200>;

    /** 학급명, 기간 등 통합 텍스트 검색 */
    search?: string;
  };

  /**
   * 통계 요약 레코드 신규 등록용(required field only). Prisma
   * attendance_stats_classroom_summary의 생성(등록) 필드 정의에 따라 설계.
   */
  export type ICreate = {
    /** 신규 요약을 생성할 반(학급)의 UUID. FK 제약 강제. */
    classroom_id: string & tags.Format<"uuid">;

    /** 소속 학교(기관)의 UUID. 필수 FK. */
    school_id: string & tags.Format<"uuid">;

    /** 집계 시작일(YYYY-MM-DD, ISO8601). */
    period_start: string;

    /** 집계 종료일(YYYY-MM-DD, ISO8601). */
    period_end: string;

    /** 기간 내 출석 합계. */
    total_present: number & tags.Type<"int32">;

    /** 기간 내 지각 합계. */
    total_late: number & tags.Type<"int32">;

    /** 기간 내 결석 합계. */
    total_absent: number & tags.Type<"int32">;

    /** 기간 내 조퇴 합계. */
    total_early_leave: number & tags.Type<"int32">;
  };

  /** 집계 요약 레코드(반+기간)의 수정/갱신 용도 오브젝트. 값 변경만 허용, FK는 PK 체계에 의해 수정 제한. */
  export type IUpdate = {
    /** 수정할 집계 시작일(YYYY-MM-DD, ISO8601) */
    period_start: string;

    /** 수정할 집계 종료일(YYYY-MM-DD, ISO8601) */
    period_end: string;

    /** 수정할 출석 합계 */
    total_present: number & tags.Type<"int32">;

    /** 수정할 지각 합계 */
    total_late: number & tags.Type<"int32">;

    /** 수정할 결석 합계 */
    total_absent: number & tags.Type<"int32">;

    /** 수정할 조퇴 합계 */
    total_early_leave: number & tags.Type<"int32">;
  };
}
