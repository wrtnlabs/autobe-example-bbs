import { tags } from "typia";

/**
 * 출결 시스템의 접속(액세스) 로그 단일 레코드.
 *
 * - 교사, 학생, 학부모, 관리자, 클래스 등 다양한 FK정규화 필드와 접속장치, IP, 타임스탬프를 모두 포함.
 * - 실시간 모니터링, 감사, 이상탐지, 규정위반 추적 등에서 활용.
 * - 모든 속성 Prisma attendance_access_log 컬럼 정의에 1:1 대응.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAttendanceAccessLog = {
  /** PK(UUID). attendance_access_log.id. 접근이벤트의 고유 식별자. */
  id: string & tags.Format<"uuid">;

  /** 접속자-교사 FK, 없는 경우 null. */
  teacher_id?: (string & tags.Format<"uuid">) | null;

  /** 접속자-학생 FK, 없는 경우 null. */
  student_id?: (string & tags.Format<"uuid">) | null;

  /** 접속자-학부모(보호자) FK, 없는 경우 null. */
  parent_id?: (string & tags.Format<"uuid">) | null;

  /** 접속자-관리자(공무원 등) FK, 없는 경우 null. */
  admin_id?: (string & tags.Format<"uuid">) | null;

  /** 반(학급) FK, 없는 경우 null. */
  classroom_id?: (string & tags.Format<"uuid">) | null;

  /** 실제 접속 시점의 IP. */
  ip_address: string;

  /** 접속 디바이스/브라우저 정보. */
  user_agent: string;

  /** 디바이스 ID/프린트/식별자 정보, 없는 경우 null. */
  device_id?: string | null;

  /** 접근 행위 타임스탬프(UTC) - Prisma accessed_at */
  accessed_at: string & tags.Format<"date-time">;
};
export namespace IAttendanceAccessLog {
  /**
   * Access log(접속기록) 검색/필터용 리퀘스트 오브젝트. Prisma attendance_access_log 주요 컬럼 필터와
   * 대시보드 요구에 따라 정의.
   */
  export type IRequest = {
    /** 필터링용 교사 FK(UUID), 출결시스템 접근 행위 교사구분. */
    teacher_id?: string & tags.Format<"uuid">;

    /** 필터링용 학생 FK(UUID), 학생 사용자별 접근 이벤트 분류. */
    student_id?: string & tags.Format<"uuid">;

    /** 필터링용 학부모(보호자) FK(UUID), 보호자별 접근로그 범위. */
    parent_id?: string & tags.Format<"uuid">;

    /** 필터링용 관리자(official) FK(UUID), 행정/교육청 등 구분관리용. */
    admin_id?: string & tags.Format<"uuid">;

    /** 특정 반(학급) 기준 로그 필터링. */
    classroom_id?: string & tags.Format<"uuid">;

    /** IP주소 기반 행위탐지, 접근 필터링, 이상 IP 추적 등. */
    ip_address?: string;

    /** 사용자 에이전트 기반 분석, 디바이스별 통계 등. */
    user_agent?: string;

    /** 조회 시작일(UTC). */
    accessed_at_start?: string & tags.Format<"date-time">;

    /** 조회 종료일(UTC). */
    accessed_at_end?: string & tags.Format<"date-time">;

    /** 페이징-페이지 번호 */
    page?: number & tags.Type<"int32">;

    /** 페이징-페이지 당 크기 */
    limit?: number & tags.Type<"int32">;
  };

  /**
   * 접근 로그 신규 생성(Create)용 오브젝트. 필수 정보(IP, 에이전트, 시각), FK는 optional(접근자 role별로
   * null 허용). 모든 Prisma attendance_access_log 정책을 따름.
   */
  export type ICreate = {
    /** 접속자 교사-외래키(optional) */
    teacher_id?: (string & tags.Format<"uuid">) | null;

    /** 접속자 학생-외래키(optional) */
    student_id?: (string & tags.Format<"uuid">) | null;

    /** 접속자 학부모-외래키(optional) */
    parent_id?: (string & tags.Format<"uuid">) | null;

    /** 접속자 관리자-외래키(optional) */
    admin_id?: (string & tags.Format<"uuid">) | null;

    /** 접속 클래스-외래키(optional) */
    classroom_id?: (string & tags.Format<"uuid">) | null;

    /** 접속시점의 원본 IP주소 */
    ip_address: string;

    /** 접속한 디바이스/브라우저 정보 */
    user_agent: string;

    /** 디바이스 식별자(optional, null 허용) */
    device_id?: string | null;

    /** 로그 타임스탬프, UTC */
    accessed_at: string & tags.Format<"date-time">;
  };

  /**
   * 출결 시스템 접근 로그(access_log) 업데이트용 타입.
   *
   * Prisma attendance_access_log 테이블의 update 케이스 및 복구/감사용 메타데이터 일부 정정 시 사용. 각
   * 컬럼/설명은 atomic, non-denormalized로 엄격하게 유지.
   *
   * 필드값은 event(접근자 유형별: 교사, 학생, 학부모, 관리자) 및 실제 접속/환경정보, 접근시간 등 접근 감사 요건을 모두
   * 반영하여 내용을 제공해야 함.
   *
   * 잘못 기록된 device_id/ip/user_agent 등 수정 목적이나, 정책상 가능한 제한 범위 내에서만 사용을 권고.
   */
  export type IUpdate = {
    /**
     * 접근 이벤트를 발생시킨 교사 ID(teacher_id). Prisma attendance_access_log 테이블의 FK
     * 컬럼으로, 본 로그가 교사 계정에서 발생한 경우 사용됩니다.
     *
     * 교사 계정이 아닌 경우 null 처리해야 하며, 이 필드가 업데이트될 때는 교사-클래스 접근, 감사 규칙에 대해 고민해야
     * 합니다. 예시: 출석 대시보드 접근.
     */
    teacher_id?: (string & tags.Format<"uuid">) | null;

    /**
     * 본 접근 이벤트를 발생시킨 학생 ID(student_id). Prisma attendance_access_log 테이블의
     * FK. 학생 계정의 접근 로그에만 입력하며, 그 외(교사/관리자/학부모)는 null 사용.
     *
     * 학생의 출석 기록 또는 이력 조회와 연결하는 데 사용됩니다.
     */
    student_id?: (string & tags.Format<"uuid">) | null;

    /**
     * 본 접근 이벤트를 발생시킨 학부모 ID(parent_id). Prisma 테이블의 FK. 학부모 계정의 접근 로그일 때만
     * 입력하며, 그 외는 null 지정.
     *
     * 학부모 대시보드/알림 내역 조회 등 기록과 연결.
     */
    parent_id?: (string & tags.Format<"uuid">) | null;

    /**
     * 본 접근 이벤트 주체가 관리자(교육청, 경찰 등)일 경우의 고유 식별자(admin_id). Prisma
     * attendance_access_log 테이블 FK.
     *
     * 접근 주체 구분을 위한 필드로, 시스템/감사 화면 접근 등에서 활용.
     */
    admin_id?: (string & tags.Format<"uuid">) | null;

    /**
     * 해당 접근 이벤트가 특정 학급/반(view, list, 대시보드)에 한정되는 경우 classroom FK.
     *
     * 해당 반(클래스)에 연관된 접근/조회 로그 추적이 필요할 때 사용. Null 가능.
     *
     * 예: 학급 대시보드 진입, 학생 목록 조회 등.
     */
    classroom_id?: (string & tags.Format<"uuid">) | null;

    /**
     * 실제 접근 요청의 원격 IP 주소(비식별화 목적/감사 추적용).
     *
     * Prisma 테이블에서 atomic string 컬럼, 절대 null/blank 불가. 예: 192.168.1.10 등.
     *
     * 모든 접근 이벤트는 반드시 남겨야 하며, 실무적으로 이상 징후(접근 위치, 탈취 시도 등) 감지에도 활용.
     */
    ip_address?: string;

    /**
     * 클라이언트 환경에서 전송된 user-agent string. ex) Mozilla/5.0... 등.
     *
     * 장치/환경 특성 진단과 보안 감사 목적으로 저장됩니다. null/공란 불가.
     *
     * 서버 로깅, 이상접속 감지에 활용됨.
     */
    user_agent?: string;

    /**
     * 접근 당시 사용 디바이스의 식별 정보/디바이스 지문. Prisma 테이블 상 atomic, nullable 컬럼.
     *
     * 모든 기록에 강제는 아니나, 추적/보안 감사 시 필수.
     */
    device_id?: string | null;

    /**
     * 접근 이벤트가 발생한 UTC 타임스탬프. Prisma 스키마의 non-nullable, audit 용 컬럼.
     *
     * 접근 일시 기록을 위해 절대 null 불가, RFC3339 포맷 강제.
     */
    accessed_at?: string & tags.Format<"date-time">;
  };
}
